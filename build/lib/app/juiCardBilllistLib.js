define(["util"],function(util){var panelId="jui-card-billlist";return{load:function(){var module=this,cardno="xxxxxxx";$("#"+panelId+"-patch-tab").show(),$("#"+panelId+"-patch-card").show(),module.setTabActive(0),module.getDataList(cardno,0),util.setShimHegith(panelId),util.switchHeader(panelId),$.afui.loadContent("#"+panelId,!1,!1),$("#"+panelId).bind("panelunload",function(){$("#"+panelId+"-patch-tab").hide(),$("#"+panelId+"-patch-card").hide()}),$("#"+panelId+"-patch-tab").find("td").bind("tap",function(){var index=$(this).index();module.setTabActive(index),module.getDataList(cardno,index)})},setTabActive:function(index){var obj=$("#"+panelId+"-patch-tab").find("td").eq(index);if(!obj.hasClass("active")){$("#"+panelId+"-patch-tab").find("td").removeClass("active"),obj.addClass("active");var pageTitle=index==0?"\u5361\u7247\u660e\u7ec6":index==1?"\u901a\u884c\u8bb0\u5f55":"\u5145\u503c\u8bb0\u5f55";$.afui.setTitle(pageTitle)}},getDataList:function(cardno,index){var module=this,json=module
.generateData(cardno,index);module.parseData2Html(json)},parseData2Html:function(json){var htmls="",tpl1='<tr class="jui-card-itemtr">     <td>{@date}        <div class="jui-card-cycle"></div>     </td>     <td>        <div class="jui-card-item">        <div class="jui-card-arrow1"></div>        <div class="jui-card-arrow2"></div>        <div class="jui-card-item-main">        <div class="jui-card-itemfee">        <span>-{@cost}</span><span>.00</span><span> \u901a\u884c\u8d39</span>        <span>{@cutoff}</span><span>\u672c\u6b21\u4f18\u60e0</span>        </div>        <div class="jui-card-eninfo">\u5165\u53e3\uff1a{@intime} {@inport}</div>        <div class="jui-card-exitinfo">\u51fa\u53e3\uff1a{@outtime} {@outport}</div>        </div>        </div>     </td> </tr>',tpl2='<tr class="jui-card-itemtr item-orange ">     <td>{@date}        <div class="jui-card-cycle"></div>     </td>     <td>        <div class="jui-card-item">        <div class="jui-card-arrow1"></div>        <div class="jui-card-arrow2"></div>        <div class="jui-card-item-main">        <div class="jui-card-itemfee">            <span>+{@fee}</span><span>.00</span><span> {@method}</span>        </div>        <div class="jui-card-rchinfo">{@time} {@status}</div>        </div>        </div>    </td> </tr>'
,tpl,item,status;for(var i=0;i<json.length;i++)item=json[i],tpl=item.type==1?tpl1:tpl2,tpl=tpl.replace("{@date}",item.date),item.type==1&&(htmls+=tpl.replace("{@cost}",item.cost).replace("{@cutoff}",item.cutoff).replace("{@intime}",item.in.time).replace("{@inport}",item.in.port).replace("{@outtime}",item.out.time).replace("{@outport}",item.out.port)),item.type==2&&(status=item.status==0?"\u5145\u503c\u5931\u8d25":"\u5145\u503c\u6210\u529f",htmls+=tpl.replace("{@fee}",item.fee).replace("{@method}",item.method).replace("{@status}",status).replace("{@time}",item.time));$("#jui-card-itemlist").html(htmls)},generateData:function(cardno,index){var tempArray1=[{type:1,card:cardno,date:"2015/5/7",cutoff:"2.00",cost:"18","in":{time:"2015/5/7 09:20",port:"\u9ec4\u57d4\u5927\u9053"},out:{time:"2015/5/7 15:15",port:"\u5b9d\u5b89\u5927\u9053"}},{type:1,card:cardno,date:"2015/5/9",cutoff:"6.00",cost:"54","in":{time:"2015/5/9 14:20",port:"\u6e05\u6e56\u5165\u53e3"},out:{time:"2015/5/9 11:15",port:"\u673a\u573a\u51fa\u53e3"
}},{type:1,card:cardno,date:"2015/5/11",cutoff:"10.00",cost:"200","in":{time:"2015/5/11 13:20",port:"\u673a\u8377\u5165\u53e3"},out:{time:"2015/5/11 15:23",port:"\u9ec4\u9e64\u51fa\u53e3"}}],tempArray2=[{type:2,card:cardno,date:"2015/5/7",time:"2015/5/15 17\uff1a10",fee:"100",status:0,method:"\u7a7a\u4e2d\u5145\u503c"},{type:2,card:cardno,date:"2015/5/18",time:"2015/5/18 18\uff1a20",fee:"300",status:1,method:"\u7f51\u70b9\u5145\u503c"}];return index==0?tempArray1.concat(tempArray2):index==1?tempArray1:tempArray2}}});